<div class="main-content">
    <div class="admin-dashboard">
        <!-- Header Premium -->
        <div class="dashboard-header">
            <div class="header-content">
                <div class="header-title">
                    <div class="title-icon">üìÖ</div>
                    <div>
                        <h1>QU·∫¢N L√ù ƒê·∫∂T PH√íNG</h1>
                        <p>Theo d√µi v√† qu·∫£n l√Ω ƒë·∫∑t ph√≤ng karaoke</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn-primary" onclick="openDatPhongModal()">
                        <i class="fas fa-plus"></i>
                        <span>T·∫°o ƒë·∫∑t ph√≤ng</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Search and Filter Bar -->
        <div class="search-filter-bar">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm ƒë·∫∑t ph√≤ng..." onkeyup="filterDatPhong()">
                <button class="search-btn" onclick="filterDatPhong()">T√¨m ki·∫øm</button>
            </div>
            <div class="filter-controls">
                <select class="filter-select" id="statusFilter" onchange="filterDatPhong()">
                    <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                    <option value="ƒêang s·ª≠ d·ª•ng">ƒêang s·ª≠ d·ª•ng</option>
                    <option value="ƒê√£ k·∫øt th√∫c">ƒê√£ k·∫øt th√∫c</option>
                    <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                </select>
                <input type="date" class="filter-select" id="dateFromFilter" onchange="filterDatPhong()"
                    placeholder="T·ª´ ng√†y">
                <input type="date" class="filter-select" id="dateToFilter" onchange="filterDatPhong()"
                    placeholder="ƒê·∫øn ng√†y">
                <select class="filter-select" id="sortFilter" onchange="filterDatPhong()">
                    <option value="newest">M·ªõi nh·∫•t</option>
                    <option value="oldest">C≈© nh·∫•t</option>
                </select>
                <button class="clear-filters" onclick="clearFilters()">
                    <i class="fas fa-times"></i>
                    X√≥a l·ªçc
                </button>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-icon total">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statTotal">0</h3>
                    <p>T·ªïng ƒë·∫∑t ph√≤ng</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon active">
                    <i class="fas fa-door-open"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statActive">0</h3>
                    <p>ƒêang s·ª≠ d·ª•ng</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon reception">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statUpcoming">0</h3>
                    <p>S·∫Øp t·ªõi</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon service">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statCompleted">0</h3>
                    <p>ƒê√£ k·∫øt th√∫c</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon technical">
                    <i class="fas fa-times-circle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statCancelled">0</h3>
                    <p>ƒê√£ h·ªßy</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon manager">
                    <i class="fas fa-calendar-day"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statToday">0</h3>
                    <p>H√¥m nay</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon security">
                    <i class="fas fa-calendar-week"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statWeek">0</h3>
                    <p>Tu·∫ßn n√†y</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon fulltime">
                    <i class="fas fa-calendar-month"></i>
                </div>
                <div class="stat-info">
                    <h3 id="statMonth">0</h3>
                    <p>Th√°ng n√†y</p>
                </div>
            </div>
        </div>

        <!-- DatPhong Grid -->
        <div class="employees-grid" id="datPhongGrid">
            {{#each datPhongKH}}
            <div class="employee-card" data-id="{{this._id}}" data-madp="{{this.MaDatPhong}}" data-makh="{{this.MaKH}}"
                data-maphong="{{this.MaPhong}}" data-status="{{this.TrangThai}}"
                data-date="{{formatDate this.createdAt}}" data-start="{{formatDateTime this.ThoiGianBatDau}}"
                data-end="{{formatDateTime this.ThoiGianKetThuc}}">
                <div class="employee-image">
                    <div class="employee-avatar-placeholder booking">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="employee-overlay">
                        <div class="employee-actions">
                            <button class="btn-edit" onclick="editDatPhong('{{this.MaDatPhong}}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-delete" onclick="deleteDatPhong('{{this._id}}', '{{this.MaDatPhong}}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="employee-badge {{this.TrangThai}}">
                        {{this.TrangThai}}
                    </div>
                    <div
                        class="employee-status {{#if (eq this.TrangThai 'ƒêang s·ª≠ d·ª•ng')}}active{{else if (eq this.TrangThai 'S·∫Øp t·ªõi')}}onleave{{else}}inactive{{/if}}">
                        {{#if this.ChiTiet.[0]}}
                        {{this.ChiTiet.[0].TenKH}}
                        {{else}}
                        Kh√°ch h√†ng
                        {{/if}}
                    </div>
                </div>

                <div class="employee-content">
                    <h3 class="employee-name">{{this.MaDatPhong}}</h3>
                    <p class="employee-code">Ph√≤ng: {{this.MaPhong}}</p>

                    <div class="employee-details">
                        <div class="detail-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>{{formatDate this.createdAt}}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-play-circle"></i>
                            <span>B·∫Øt ƒë·∫ßu: {{formatTime this.ThoiGianBatDau}}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-stop-circle"></i>
                            <span>K·∫øt th√∫c: {{formatTime this.ThoiGianKetThuc}}</span>
                        </div>
                        {{#if this.ChiTiet.[0]}}
                        <div class="detail-item">
                            <i class="fas fa-user"></i>
                            <span>KH: {{this.ChiTiet.[0].TenKH}}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-phone"></i>
                            <span>{{this.ChiTiet.[0].SDT}}</span>
                        </div>
                        {{/if}}
                    </div>

                    <!-- Th√¥ng tin kh√°ch h√†ng -->
                    <div class="customer-breakdown">
                        <h4>Th√¥ng tin kh√°ch h√†ng:</h4>
                        {{#if this.ChiTiet.[0]}}
                        <div class="customer-item">
                            <span class="customer-name">{{this.ChiTiet.[0].TenKH}}</span>
                            <span class="customer-phone">{{this.ChiTiet.[0].SDT}}</span>
                        </div>
                        {{else}}
                        <div class="customer-item">
                            <span class="customer-name">Kh√¥ng c√≥ th√¥ng tin</span>
                        </div>
                        {{/if}}
                    </div>

                    <!-- FOOTER V·ªöI 2 N√öT -->
                    <div class="employee-footer">
                        <button class="btn-detail" onclick="viewDatPhongDetail('{{this.MaDatPhong}}')">
                            <i class="fas fa-eye"></i>
                            Xem chi ti·∫øt
                        </button>
                        {{#if (eq this.TrangThai "ƒê√£ ƒë·∫∑t")}}
                        <button class="btn-checkin" onclick="checkInDatPhong('{{this.MaDatPhong}}')">
                            <i class="fas fa-sign-in-alt"></i>
                            Check-in
                        </button>
                        {{else if (eq this.TrangThai "ƒêang s·ª≠ d·ª•ng")}}
                        <button class="btn-checkout" onclick="checkOutDatPhong('{{this.MaDatPhong}}')">
                            <i class="fas fa-sign-out-alt"></i>
                            Check-out
                        </button>
                        {{/if}}
                    </div>
                </div>
            </div>
            {{/each}}
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState"
            style="{{#if datPhongKH.length}}display: none;{{else}}display: block;{{/if}}">
            <div class="empty-icon">üìÖ</div>
            <h3>Kh√¥ng t√¨m th·∫•y ƒë·∫∑t ph√≤ng</h3>
            <p>Th·ª≠ thay ƒë·ªïi b·ªô l·ªçc ho·∫∑c t·∫°o ƒë·∫∑t ph√≤ng m·ªõi</p>
            <button class="btn-primary" onclick="openDatPhongModal()">
                <i class="fas fa-plus"></i>
                T·∫°o ƒë·∫∑t ph√≤ng ƒë·∫ßu ti√™n
            </button>
        </div>
    </div>

    <!-- DatPhong Modal -->
    <div class="modal-overlay" id="datPhongModal" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modalTitle">T·∫°o ƒë·∫∑t ph√≤ng m·ªõi</h2>
                <button class="modal-close" onclick="closeDatPhongModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <form id="datPhongForm" onsubmit="saveDatPhong(event)">
                    <input type="hidden" id="datPhongId">
                    <input type="hidden" id="datPhongMaDP">

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="khachHangSelect">Kh√°ch h√†ng *</label>
                            <select id="khachHangSelect" required>
                                <option value="">Ch·ªçn kh√°ch h√†ng</option>
                                {{#each khachhangs}}
                                <option value="{{this.MaKH}}" data-tenkh="{{this.TenKH}}" data-sdt="{{this.SDT}}">
                                    {{this.TenKH}} - {{this.SDT}}
                                </option>
                                {{/each}}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="maKH">M√£ kh√°ch h√†ng</label>
                            <input type="text" id="maKH" readonly>
                        </div>

                        <div class="form-group">
                            <label for="tenKH">T√™n kh√°ch h√†ng</label>
                            <input type="text" id="tenKH" readonly>
                        </div>

                        <div class="form-group">
                            <label for="sdtKH">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="text" id="sdtKH" readonly>
                        </div>

                        <div class="form-group">
                            <label for="phongSelect">Ph√≤ng *</label>
                            <select id="phongSelect" required>
                                <option value="">Ch·ªçn ph√≤ng</option>
                                {{#each phongs}}
                                <option value="{{this.MaPhong}}" data-loaiphong="{{this.LoaiPhong}}"
                                    data-giaphong="{{this.GiaPhong}}">
                                    Ph√≤ng {{this.MaPhong}} - {{this.LoaiPhong}}
                                </option>
                                {{/each}}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="maPhong">M√£ ph√≤ng</label>
                            <input type="text" id="maPhong" readonly>
                        </div>

                        <div class="form-group">
                            <label for="loaiPhong">Lo·∫°i ph√≤ng</label>
                            <input type="text" id="loaiPhong" readonly>
                        </div>

                        <div class="form-group">
                            <label for="giaPhong">Gi√° ph√≤ng</label>
                            <input type="text" id="giaPhong" readonly>
                        </div>

                        <div class="form-group">
                            <label for="thoiGianBatDau">Th·ªùi gian b·∫Øt ƒë·∫ßu *</label>
                            <input type="datetime-local" id="thoiGianBatDau" required>
                        </div>

                        <div class="form-group">
                            <label for="thoiGianKetThuc">Th·ªùi gian k·∫øt th√∫c *</label>
                            <input type="datetime-local" id="thoiGianKetThuc" required>
                        </div>

                        <div class="form-group">
                            <label for="datPhongStatus">Tr·∫°ng th√°i *</label>
                            <select id="datPhongStatus" required>
                                <option value="S·∫Øp t·ªõi">S·∫Øp t·ªõi</option>
                                <option value="ƒêang s·ª≠ d·ª•ng">ƒêang s·ª≠ d·ª•ng</option>
                                <option value="ƒê√£ k·∫øt th√∫c">ƒê√£ k·∫øt th√∫c</option>
                                <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="ghiChu">Ghi ch√∫</label>
                            <textarea id="ghiChu" rows="3" placeholder="Ghi ch√∫ v·ªÅ ƒë·∫∑t ph√≤ng..."></textarea>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" type="button" onclick="closeDatPhongModal()">H·ªßy</button>
                <button class="btn-primary" type="submit" form="datPhongForm">L∆∞u ƒë·∫∑t ph√≤ng</button>
            </div>
        </div>
    </div>

    <!-- Chi ti·∫øt ƒë·∫∑t ph√≤ng Modal -->
    <div class="modal-overlay" id="detailModal" style="display: none;">
        <div class="modal-container invoice-modal">
            <!-- HEADER M·ªöI - ƒê√É ƒê∆Ø·ª¢C S·∫ÆP X·∫æP L·∫†I -->
            <div class="modal-header invoice-company-header">
                <!-- H√†ng 1: Logo c√¥ng ty v√† n√∫t h√†nh ƒë·ªông -->
                <div class="header-top-row">
                    <div class="company-logo">
                        <div class="logo-placeholder">
                            <i class="fas fa-microphone-alt"></i>
                        </div>
                        <div class="company-info">
                            <h1>KARAOKE NNICE</h1>
                            <p>113 Phan X√≠ch Long, Ph∆∞·ªùng 2, Qu·∫≠n Ph√∫ Nhu·∫≠n, TP. H·ªì Ch√≠ Minh, Vi·ªát Nam</p>
                            <p>(028) 35 170 046</p>
                        </div>
                    </div>
                    <div class="header-actions" id="headerActions">
                        <!-- N√∫t h√†nh ƒë·ªông s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t b·∫±ng JS -->
                    </div>
                </div>

                <!-- H√†ng 2: Ti√™u ƒë·ªÅ -->
                <div class="header-title-row">
                    <h2>CHI TI·∫æT ƒê·∫∂T PH√íNG</h2>
                </div>

                <!-- H√†ng 3: Th√¥ng tin ƒë·∫∑t ph√≤ng -->
                <div class="header-meta-row">
                    <div class="meta-item">
                        <span class="label">Ng√†y ƒë·∫∑t:</span>
                        <span class="value" id="modal-booking-date"></span>
                    </div>
                    <div class="meta-item">
                        <span class="label">M√£ ƒë·∫∑t ph√≤ng:</span>
                        <span class="value" id="modal-booking-number"></span>
                    </div>
                    <div class="meta-item">
                        <span class="label">Tr·∫°ng th√°i:</span>
                        <span class="value status-badge" id="modal-booking-status"></span>
                    </div>
                </div>
            </div>

            <div class="modal-body" id="detailContent">
                <!-- N·ªôi dung chi ti·∫øt s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅn b·∫±ng JS -->
            </div>

            <!-- TH√äM FOOTER V·ªöI N√öT ƒê√ìNG -->
            <div class="modal-footer">
                <button class="btn-secondary" type="button" onclick="closeDetailModal()">ƒê√≥ng</button>
            </div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
    // ===== CONFIGURATION & STATE =====
    let allDatPhongs = [];
    let filteredDatPhongs = [];

    // ===== STATISTICS CALCULATION =====
    function calculateStatistics() {
        const datPhongs = allDatPhongs;

        const totalDatPhongs = datPhongs.length;
        const today = new Date().toDateString();
        const countActive = datPhongs.filter(dp => dp.getAttribute('data-status') === 'ƒêang s·ª≠ d·ª•ng').length;
        const countUpcoming = datPhongs.filter(dp => dp.getAttribute('data-status') === 'S·∫Øp t·ªõi').length;
        const countCompleted = datPhongs.filter(dp => dp.getAttribute('data-status') === 'ƒê√£ k·∫øt th√∫c').length;
        const countCancelled = datPhongs.filter(dp => dp.getAttribute('data-status') === 'ƒê√£ h·ªßy').length;
        const countToday = datPhongs.filter(dp =>
            new Date(dp.getAttribute('data-date')).toDateString() === today
        ).length;

        updateStatCard('#statTotal', totalDatPhongs);
        updateStatCard('#statActive', countActive);
        updateStatCard('#statUpcoming', countUpcoming);
        updateStatCard('#statCompleted', countCompleted);
        updateStatCard('#statCancelled', countCancelled);
        updateStatCard('#statToday', countToday);
        updateStatCard('#statWeek', Math.floor(countToday * 1.5)); // Gi·∫£ l·∫≠p
        updateStatCard('#statMonth', Math.floor(countToday * 6)); // Gi·∫£ l·∫≠p
    }

    function updateStatCard(selector, value) {
        const element = document.querySelector(selector);
        if (element) {
            element.textContent = value;
        }
    }

    // ===== FORMAT FUNCTIONS =====
    function formatDate(dateString) {
        if (!dateString) return 'N/A';
        const date = new Date(dateString);
        return date.toLocaleDateString('vi-VN');
    }

    function formatTime(dateString) {
        if (!dateString) return 'N/A';
        const date = new Date(dateString);
        return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });
    }

    function formatDateTime(dateString) {
        if (!dateString) return 'N/A';
        const date = new Date(dateString);
        return date.toLocaleString('vi-VN');
    }

    // ===== DAT PHONG MANAGEMENT =====
    function openDatPhongModal(datPhongData = null) {
        document.getElementById('modalTitle').textContent = datPhongData ? 'Ch·ªânh s·ª≠a ƒë·∫∑t ph√≤ng' : 'T·∫°o ƒë·∫∑t ph√≤ng m·ªõi';
        document.getElementById('datPhongModal').style.display = 'flex';
        document.body.style.overflow = 'hidden';

        if (datPhongData) {
            // ƒêi·ªÅn th√¥ng tin ƒë·∫∑t ph√≤ng
            document.getElementById('datPhongId').value = datPhongData._id || '';
            document.getElementById('datPhongMaDP').value = datPhongData.MaDatPhong || '';
            document.getElementById('khachHangSelect').value = datPhongData.MaKH || '';
            document.getElementById('phongSelect').value = datPhongData.MaPhong || '';
            document.getElementById('datPhongStatus').value = datPhongData.TrangThai || 'S·∫Øp t·ªõi';
            document.getElementById('ghiChu').value = datPhongData.GhiChu || '';

            // Load th√¥ng tin kh√°ch h√†ng
            loadKhachHangInfo();

            // Load th√¥ng tin ph√≤ng
            loadPhongInfo();

            // ƒêi·ªÅn th·ªùi gian
            document.getElementById('thoiGianBatDau').value = formatDateTimeLocal(datPhongData.ThoiGianBatDau);
            document.getElementById('thoiGianKetThuc').value = formatDateTimeLocal(datPhongData.ThoiGianKetThuc);
        } else {
            resetDatPhongForm();
        }
    }

    function closeDatPhongModal() {
        document.getElementById('datPhongModal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    function resetDatPhongForm() {
        document.getElementById('datPhongForm').reset();
        document.getElementById('datPhongId').value = '';
        document.getElementById('datPhongMaDP').value = '';
        document.getElementById('datPhongStatus').value = 'S·∫Øp t·ªõi';
    }

    function loadKhachHangInfo() {
        const selectedOption = document.querySelector('#khachHangSelect option:checked');
        if (selectedOption && selectedOption.value) {
            document.getElementById('maKH').value = selectedOption.value || '';
            document.getElementById('tenKH').value = selectedOption.getAttribute('data-tenkh') || '';
            document.getElementById('sdtKH').value = selectedOption.getAttribute('data-sdt') || '';
        }
    }

    function loadPhongInfo() {
        const selectedOption = document.querySelector('#phongSelect option:checked');
        if (selectedOption && selectedOption.value) {
            document.getElementById('maPhong').value = selectedOption.value || '';
            document.getElementById('loaiPhong').value = selectedOption.getAttribute('data-loaiphong') || '';
            document.getElementById('giaPhong').value = formatCurrency(selectedOption.getAttribute('data-giaphong')) || '';
        }
    }

    function formatDateTimeLocal(dateString) {
        if (!dateString) return '';
        const date = new Date(dateString);
        return date.toISOString().slice(0, 16);
    }

    function formatCurrency(amount) {
        if (typeof amount === 'string') {
            amount = parseFloat(amount) || 0;
        }
        return new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND'
        }).format(amount);
    }

    async function saveDatPhong(event) {
        event.preventDefault();

        const datPhongId = document.getElementById('datPhongId').value;
        const isEdit = !!datPhongId;

        const formData = {
            MaKH: document.getElementById('khachHangSelect').value,
            MaPhong: document.getElementById('phongSelect').value,
            TrangThai: document.getElementById('datPhongStatus').value,
            ThoiGianBatDau: document.getElementById('thoiGianBatDau').value,
            ThoiGianKetThuc: document.getElementById('thoiGianKetThuc').value,
            GhiChu: document.getElementById('ghiChu').value
        };

        // Validation
        if (!formData.MaKH || !formData.MaPhong) {
            showError('Vui l√≤ng ch·ªçn kh√°ch h√†ng v√† ph√≤ng');
            return;
        }

        const startTime = new Date(formData.ThoiGianBatDau);
        const endTime = new Date(formData.ThoiGianKetThuc);

        if (startTime >= endTime) {
            showError('Th·ªùi gian k·∫øt th√∫c ph·∫£i sau th·ªùi gian b·∫Øt ƒë·∫ßu');
            return;
        }

        const url = isEdit ? `/api/datphong/${document.getElementById('datPhongMaDP').value}` : '/api/datphong';
        const method = isEdit ? 'PUT' : 'POST';

        try {
            Swal.fire({
                title: 'ƒêang l∆∞u ƒë·∫∑t ph√≤ng...',
                text: 'Vui l√≤ng ch·ªù trong gi√¢y l√°t',
                allowOutsideClick: false,
                didOpen: () => Swal.showLoading()
            });

            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            });

            const result = await response.json();
            if (!response.ok) throw new Error(result.error || 'L·ªói server');

            Swal.fire({
                icon: 'success',
                title: 'Th√†nh c√¥ng!',
                text: result.message || `ƒê·∫∑t ph√≤ng ƒë√£ ƒë∆∞·ª£c ${isEdit ? 'c·∫≠p nh·∫≠t' : 't·∫°o'} th√†nh c√¥ng!`,
                timer: 1500,
                showConfirmButton: false
            });

            setTimeout(() => {
                location.reload();
            }, 1500);

        } catch (error) {
            console.error('‚ùå L·ªói khi l∆∞u ƒë·∫∑t ph√≤ng:', error);
            Swal.fire({
                icon: 'error',
                title: 'L·ªói!',
                text: error.message || 'Kh√¥ng th·ªÉ l∆∞u ƒë·∫∑t ph√≤ng',
                confirmButtonColor: '#667eea'
            });
        }
    }

    // ===== CHECK-IN V√Ä CHUY·ªÇN TH√ÄNH H√ìA ƒê∆†N =====
    async function checkInDatPhong(maDatPhong) {
        try {
            // Ki·ªÉm tra xem ƒë√£ qu√° gi·ªù ch∆∞a
            const datPhongResponse = await fetch(`/api/datphong/${maDatPhong}`);
            if (!datPhongResponse.ok) {
                throw new Error('Kh√¥ng t√¨m th·∫•y ƒë·∫∑t ph√≤ng');
            }
            
            const datPhong = await datPhongResponse.json();
            const now = new Date();
            const thoiGianBatDau = new Date(datPhong.ThoiGianBatDau);
            
            // Ki·ªÉm tra n·∫øu qu√° th·ªùi gian b·∫Øt ƒë·∫ßu 15 ph√∫t
            const thoiGianQuaHan = new Date(thoiGianBatDau.getTime() + 15000 * 60000); // +15 ph√∫t
            
            if (now > thoiGianQuaHan) {
                Swal.fire({
                    icon: 'error',
                    title: 'Kh√¥ng th·ªÉ check-in',
                    text: 'ƒê√£ qu√° th·ªùi gian cho ph√©p check-in (15 ph√∫t sau gi·ªù ƒë·∫∑t)',
                    confirmButtonColor: '#667eea'
                });
                return;
            }

            Swal.fire({
                title: 'Check-in kh√°ch h√†ng?',
                text: 'ƒê·∫∑t ph√≤ng s·∫Ω ƒë∆∞·ª£c chuy·ªÉn th√†nh h√≥a ƒë∆°n "Ch·ªù thanh to√°n" v√† b·∫Øt ƒë·∫ßu t√≠nh gi·ªù',
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#48bb78',
                cancelButtonColor: '#a0aec0',
                confirmButtonText: 'X√°c nh·∫≠n check-in',
                cancelButtonText: 'H·ªßy'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    try {
                        // G·ªçi API check-in (c·∫ßn c·∫≠p nh·∫≠t API ƒë·ªÉ t·∫°o h√≥a ƒë∆°n)
                        const response = await fetch(`/api/datphong/${maDatPhong}/checkin`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' }
                        });

                        if (!response.ok) {
                            const errorResult = await response.json();
                            throw new Error(errorResult.error || 'L·ªói server');
                        }

                        const result = await response.json();

                        Swal.fire({
                            icon: 'success',
                            title: 'Th√†nh c√¥ng!',
                            text: result.message || 'ƒê√£ check-in v√† t·∫°o h√≥a ƒë∆°n th√†nh c√¥ng',
                            timer: 2000,
                            showConfirmButton: false
                        });

                        setTimeout(() => {
                            location.reload();
                        }, 2000);
                        
                    } catch (error) {
                        console.error('‚ùå L·ªói khi check-in:', error);
                        Swal.fire({
                            icon: 'error',
                            title: 'L·ªói!',
                            text: error.message || 'Kh√¥ng th·ªÉ check-in',
                            confirmButtonColor: '#667eea'
                        });
                    }
                }
            });
            
        } catch (error) {
            console.error('‚ùå L·ªói khi ki·ªÉm tra ƒë·∫∑t ph√≤ng:', error);
            Swal.fire({
                icon: 'error',
                title: 'L·ªói!',
                text: 'Kh√¥ng th·ªÉ ki·ªÉm tra th√¥ng tin ƒë·∫∑t ph√≤ng',
                confirmButtonColor: '#667eea'
            });
        }
    }

    async function checkOutDatPhong(maDatPhong) {
        try {
            const response = await fetch(`/api/datphong/${maDatPhong}/checkout`, {
                method: 'PUT'
            });

            if (response.ok) {
                Swal.fire({
                    icon: 'success',
                    title: 'Th√†nh c√¥ng!',
                    text: 'ƒê√£ check-out kh√°ch h√†ng',
                    timer: 1500,
                    showConfirmButton: false
                });
                setTimeout(() => location.reload(), 1500);
            } else {
                throw new Error('L·ªói khi check-out');
            }
        } catch (error) {
            Swal.fire({
                icon: 'error',
                title: 'L·ªói!',
                text: 'Kh√¥ng th·ªÉ check-out'
            });
        }
    }

    // ===== MODAL MANAGEMENT =====
    async function viewDatPhongDetail(maDatPhong) {
        try {
            // Hi·ªÉn th·ªã loading
            const detailContent = document.getElementById('detailContent');
            detailContent.innerHTML = `
            <div class="loading-invoice">
                <div class="loading-spinner"></div>
                <p>ƒêang t·∫£i th√¥ng tin ƒë·∫∑t ph√≤ng...</p>
            </div>
        `;

            // Hi·ªÉn th·ªã modal
            const detailModal = document.getElementById('detailModal');
            detailModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            // L·∫•y th√¥ng tin ƒë·∫∑t ph√≤ng
            const response = await fetch(`/api/datphong/${maDatPhong}`);
            if (!response.ok) {
                throw new Error('Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu ƒë·∫∑t ph√≤ng');
            }

            const datPhong = await response.json();
            console.log(datPhong);

            // C·∫≠p nh·∫≠t ng√†y ƒë·∫∑t v·ªõi th·ªùi gian 
            document.getElementById('modal-booking-date').textContent =
                `${formatDate(datPhong.createdAt)} ${formatTime(datPhong.createdAt)}`;

            // C·∫¨P NH·∫¨T HEADER V·ªöI TH√îNG TIN T·ª™ API
            document.getElementById('modal-booking-number').textContent = `${datPhong.MaDatPhong}`;

            const statusElement = document.getElementById('modal-booking-status');
            statusElement.textContent = datPhong.TrangThai;
            statusElement.className = `value status-badge ${datPhong.TrangThai === 'ƒêang s·ª≠ d·ª•ng' ? 'active' : datPhong.TrangThai === 'S·∫Øp t·ªõi' ? 'pending' : datPhong.TrangThai === 'ƒê√£ k·∫øt th√∫c' ? 'completed' : 'cancelled'}`;

            // C·∫¨P NH·∫¨T N√öT H√ÄNH ƒê·ªòNG TRONG HEADER
            updateHeaderActions(maDatPhong, datPhong.TrangThai);

            // Render ph·∫ßn body c·ªßa ƒë·∫∑t ph√≤ng
            renderBookingBody(datPhong);

        } catch (error) {
            console.error('L·ªói khi t·∫£i chi ti·∫øt ƒë·∫∑t ph√≤ng:', error);
            detailContent.innerHTML = `
            <div class="error-state">
                <div class="error-icon">‚ùå</div>
                <h3>Kh√¥ng th·ªÉ t·∫£i ƒë·∫∑t ph√≤ng</h3>
                <p>${error.message || 'Vui l√≤ng th·ª≠ l·∫°i sau'}</p>
                <button class="btn-primary" onclick="viewDatPhongDetail('${maDatPhong}')">
                    <i class="fas fa-redo"></i>
                    Th·ª≠ l·∫°i
                </button>
            </div>
        `;
        }
    }

    // ===== C·∫¨P NH·∫¨T N√öT H√ÄNH ƒê·ªòNG TRONG HEADER =====
    function updateHeaderActions(maDatPhong, trangThai) {
        const headerActions = document.getElementById('headerActions');

        let actionButtons = '';

        if (trangThai === 'S·∫Øp t·ªõi') {
            actionButtons = `
            <button class="btn-checkin-detail" onclick="checkInDatPhong('${maDatPhong}')">
                <i class="fas fa-sign-in-alt"></i>
                Check-in
            </button>
        `;
        } else if (trangThai === 'ƒêang s·ª≠ d·ª•ng') {
            actionButtons = `
            <button class="btn-checkout-detail" onclick="checkOutDatPhong('${maDatPhong}')">
                <i class="fas fa-sign-out-alt"></i>
                Check-out
            </button>
        `;
        }

        // Th√™m n√∫t ƒë√≥ng ·ªü g√≥c tr√™n b√™n ph·∫£i
        actionButtons += `
        <button class="modal-close" onclick="closeDetailModal()">
            <i class="fas fa-times"></i>
        </button>
    `;

        headerActions.innerHTML = actionButtons;
    }

    // ===== H√ÄM ƒê√ìNG MODAL CHI TI·∫æT =====
    function closeDetailModal() {
        const detailModal = document.getElementById('detailModal');
        detailModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    // ===== S·ª∞ KI·ªÜN CLICK RA NGO√ÄI ƒê·ªÇ ƒê√ìNG MODAL =====
    document.addEventListener('DOMContentLoaded', function () {
        // S·ª± ki·ªán cho modal chi ti·∫øt
        const detailModal = document.getElementById('detailModal');
        if (detailModal) {
            detailModal.addEventListener('click', function (event) {
                if (event.target === detailModal) {
                    closeDetailModal();
                }
            });
        }

        // S·ª± ki·ªán cho modal ƒë·∫∑t ph√≤ng
        const datPhongModal = document.getElementById('datPhongModal');
        if (datPhongModal) {
            datPhongModal.addEventListener('click', function (event) {
                if (event.target === datPhongModal) {
                    closeDatPhongModal();
                }
            });
        }
    });

    // ===== H√ÄM ƒê√ìNG MODAL ƒê·∫∂T PH√íNG =====
    function closeDatPhongModal() {
        const datPhongModal = document.getElementById('datPhongModal');
        datPhongModal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }



    // ===== RENDER PH·∫¶N BODY C·ª¶A ƒê·∫∂T PH√íNG =====
    function renderBookingBody(datPhong) {
        const detailContent = document.getElementById('detailContent');

        detailContent.innerHTML = `
      <div class="modern-invoice" id="printableInvoice">
        <!-- Th√¥ng tin kh√°ch h√†ng v√† ph√≤ng -->
        <div class="invoice-customer-info">
          <div class="info-section">
            <h3>Th√¥ng tin kh√°ch h√†ng</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">M√£ KH:</span>
                <span class="value">${datPhong.MaKH || 'N/A'}</span>
              </div>
              <div class="info-item">
                <span class="label">T√™n KH:</span>
                <!-- S·ª¨A: D√πng KhachHang thay v√¨ ChiTiet -->
                <span class="value">${datPhong.KhachHang ? datPhong.KhachHang.TenKH : 'N/A'}</span>
              </div>
              <div class="info-item">
                <span class="label">SƒêT:</span>
                <!-- S·ª¨A: D√πng KhachHang thay v√¨ ChiTiet -->
                <span class="value">${datPhong.KhachHang ? datPhong.KhachHang.SDT : 'N/A'}</span>
              </div>
            </div>
          </div>
          <div class="info-section">
            <h3>Th√¥ng tin ph√≤ng</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Ph√≤ng:</span>
                <span class="value">${datPhong.MaPhong || 'N/A'} (${datPhong.SoNguoi || 'N/A'} ng∆∞·ªùi) </span>
              </div>
              <div class="info-item">
                <span class="label">Th·ªùi gian:</span>
                <span class="value">${formatTime(datPhong.ThoiGianBatDau)}</span>
              </div>
              <div class="info-item">
                <span class="label">Ng√†y:</span>
                <span class="value">${formatDate(datPhong.ThoiGianBatDau)}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Th·ªùi gian ƒë·∫∑t ph√≤ng -->
        <div class="invoice-services">
          <h3>Th·ªùi gian ƒë·∫∑t ph√≤ng</h3>
          <div class="services-table">
            <div class="table-header">
              <div class="col-service">S·ª± ki·ªán</div>
              <div class="col-date">Ng√†y</div>
              <div class="col-time">Th·ªùi gian</div>
            </div>
            
            <div class="table-row">
              <div class="col-service">
                <span class="service-name">Check In</span>
              </div>
              <div class="col-date">${formatDate(datPhong.ThoiGianBatDau)}</div>
              <div class="col-time">${formatTime(datPhong.ThoiGianBatDau)}</div>
            </div>
          </div>
        </div>

        <!-- Th√¥ng tin tr·∫°ng th√°i -->
        <div class="invoice-summary">
          <div class="summary-row">
            <span class="label">Tr·∫°ng th√°i:</span>
            <span class="value status-badge ${datPhong.TrangThai === 'ƒêang s·ª≠ d·ª•ng' ? 'active' : datPhong.TrangThai === 'S·∫Øp t·ªõi' ? 'pending' : datPhong.TrangThai === 'ƒê√£ k·∫øt th√∫c' ? 'completed' : 'cancelled'}">${datPhong.TrangThai}</span>
          </div>
          <div class="summary-row">
            <span class="label">Th·ªùi gian t·∫°o:</span>
            <span class="value">${formatDateTime(datPhong.createdAt)}</span>
          </div>
          ${datPhong.updatedAt ? `
          <div class="summary-row">
            <span class="label">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:</span>
            <span class="value">${formatDateTime(datPhong.updatedAt)}</span>
          </div>
          ` : ''}
        </div>

        <!-- Ghi ch√∫ -->
        ${datPhong.GhiChu ? `
        <div class="invoice-payment">
          <div class="payment-notes full-width">
            <h4>Ghi ch√∫</h4>
            <p>${datPhong.GhiChu}</p>
          </div>
        </div>
        ` : ''}

        <!-- Footer ƒë·∫∑t ph√≤ng -->
        <div class="invoice-footer">
          <div class="footer-signature">
            <div class="signature-line"></div>
            <p>Ch·ªØ k√Ω nh√¢n vi√™n</p>
          </div>
          <div class="footer-thanks">
            <p><strong>KARAOKE NNICE</strong></p>
            <p>Hotline: (028)3 5170046</p>
          </div>
        </div>
      </div>
    `;
    }

    // ===== FILTER & SEARCH =====
    function filterDatPhong() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const statusFilter = document.getElementById('statusFilter').value;
        const dateFrom = document.getElementById('dateFromFilter').value;
        const dateTo = document.getElementById('dateToFilter').value;
        const sortFilter = document.getElementById('sortFilter').value;

        filteredDatPhongs = allDatPhongs.filter(card => {
            const maDP = card.getAttribute('data-madp').toLowerCase();
            const maKH = card.getAttribute('data-makh').toLowerCase();
            const maPhong = card.getAttribute('data-maphong').toLowerCase();
            const status = card.getAttribute('data-status');
            const date = card.getAttribute('data-date');

            const matchesSearch = !searchTerm ||
                maDP.includes(searchTerm) ||
                maKH.includes(searchTerm) ||
                maPhong.includes(searchTerm);
            const matchesStatus = !statusFilter || status === statusFilter;
            const matchesDate = (!dateFrom || date >= dateFrom) &&
                (!dateTo || date <= dateTo);

            const shouldShow = matchesSearch && matchesStatus && matchesDate;
            card.style.display = shouldShow ? 'block' : 'none';
            return shouldShow;
        });

        // Sort
        sortDatPhongs(sortFilter);
        calculateFilteredStatistics();
        toggleEmptyState(filteredDatPhongs.length === 0);
    }

    function sortDatPhongs(sortType) {
        const container = document.getElementById('datPhongGrid');
        const cards = Array.from(container.querySelectorAll('.employee-card'));

        cards.sort((a, b) => {
            switch (sortType) {
                case 'newest':
                    return new Date(b.getAttribute('data-date')) - new Date(a.getAttribute('data-date'));
                case 'oldest':
                    return new Date(a.getAttribute('data-date')) - new Date(b.getAttribute('data-date'));
                default:
                    return 0;
            }
        });

        cards.forEach(card => container.appendChild(card));
    }

    function clearFilters() {
        document.getElementById('searchInput').value = '';
        document.getElementById('statusFilter').value = '';
        document.getElementById('dateFromFilter').value = '';
        document.getElementById('dateToFilter').value = '';
        document.getElementById('sortFilter').value = 'newest';

        filterDatPhong();
    }

    function toggleEmptyState(show) {
        const emptyState = document.getElementById('emptyState');
        const grid = document.getElementById('datPhongGrid');

        if (!emptyState || !grid) return;

        if (show) {
            grid.style.display = 'none';
            emptyState.style.display = 'block';
        } else {
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
        }
    }

    // ===== UTILITY FUNCTIONS =====
    function showError(message) {
        Swal.fire({
            icon: 'warning',
            title: 'Thi·∫øu th√¥ng tin',
            text: message,
            confirmButtonColor: '#667eea'
        });
    }

    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', function () {
        allDatPhongs = Array.from(document.querySelectorAll('.employee-card'));
        filteredDatPhongs = [...allDatPhongs];

        calculateStatistics();

        // Event listeners
        document.getElementById('khachHangSelect').addEventListener('change', loadKhachHangInfo);
        document.getElementById('phongSelect').addEventListener('change', loadPhongInfo);
    });
</script>

<style>
    /* ===== RESET & VARIABLES ===== */
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --success-gradient: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        --warning-gradient: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
        --danger-gradient: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        --info-gradient: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
        --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        --shadow-light: 0 4px 20px rgba(0, 0, 0, 0.08);
        --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.12);
        --shadow-heavy: 0 12px 40px rgba(0, 0, 0, 0.15);
        --border-radius: 12px;
        --border-radius-lg: 16px;
        --border-radius-xl: 20px;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    /* ===== LAYOUT CH√çNH ===== */
    .main-content {
        margin-left: 280px;
        transition: margin-left 0.3s ease;
        min-height: 100vh;
        background: var(--bg-gradient);
    }

    .admin-dashboard {
        padding: 24px;
        min-height: 100vh;
    }

    /* ===== HEADER DASHBOARD ===== */
    .dashboard-header {
        background: var(--primary-gradient);
        border-radius: var(--border-radius-lg);
        padding: 28px;
        margin-bottom: 28px;
        box-shadow: var(--shadow-light);
        color: white;
        position: relative;
        overflow: hidden;
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px;
        position: relative;
        z-index: 1;
    }

    .header-title {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .title-icon {
        font-size: 3rem;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    }

    .header-title h1 {
        margin: 0;
        font-size: 2rem;
        font-weight: 700;
    }

    .header-title p {
        margin: 8px 0 0 0;
        opacity: 0.9;
        font-size: 1.1rem;
    }

    /* ===== N√öT CHUNG ===== */
    .btn-primary {
        background: var(--success-gradient);
        color: white;
        border: none;
        padding: 14px 24px;
        border-radius: var(--border-radius);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
    }

    .btn-secondary {
        background: #f1f5f9;
        border: 2px solid #e2e8f0;
        color: #64748b;
        padding: 14px 24px;
        border-radius: var(--border-radius);
        cursor: pointer;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
        font-weight: 600;
    }

    .btn-secondary:hover {
        background: #e2e8f0;
        color: #475569;
    }

    /* ===== THANH T√åM KI·∫æM & B·ªò L·ªåC ===== */
    .search-filter-bar {
        background: white;
        border-radius: var(--border-radius-lg);
        padding: 24px;
        margin-bottom: 28px;
        display: flex;
        gap: 24px;
        align-items: center;
        flex-wrap: wrap;
        box-shadow: var(--shadow-light);
        border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .search-box {
        display: flex;
        align-items: center;
        background: #f8fafc;
        border-radius: var(--border-radius);
        padding: 12px 20px;
        flex: 1;
        min-width: 320px;
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
    }

    .search-box:focus-within {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-box i {
        color: #64748b;
        margin-right: 12px;
        font-size: 1.1rem;
    }

    .search-box input {
        border: none;
        background: none;
        outline: none;
        flex: 1;
        padding: 8px 0;
        font-size: 1rem;
        color: #1e293b;
    }

    .search-btn {
        background: var(--primary-gradient);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        cursor: pointer;
        margin-left: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .filter-controls {
        display: flex;
        gap: 16px;
        align-items: center;
        flex-wrap: wrap;
    }

    .filter-select {
        padding: 12px 20px;
        border: 2px solid #e2e8f0;
        border-radius: 10px;
        background: white;
        color: #475569;
        min-width: 180px;
        font-size: 1rem;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .clear-filters {
        background: #f1f5f9;
        border: 2px solid #e2e8f0;
        color: #64748b;
        padding: 12px 20px;
        border-radius: 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    /* ===== TH·ªêNG K√ä ===== */
    .stats-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
    }

    .stat-card {
        background: white;
        border-radius: var(--border-radius-xl);
        padding: 32px;
        display: flex;
        align-items: center;
        gap: 20px;
        box-shadow: var(--shadow-light);
        transition: all 0.3s ease;
        border: 1px solid rgba(0, 0, 0, 0.03);
        position: relative;
        overflow: hidden;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--primary-gradient);
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-medium);
    }

    .stat-icon {
        width: 80px;
        height: 80px;
        border-radius: var(--border-radius-xl);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        box-shadow: var(--shadow-light);
    }

    .stat-icon.total {
        background: linear-gradient(135deg, #fed7d7, #feb2b2);
        color: #c53030;
    }

    .stat-icon.active {
        background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
        color: #276749;
    }

    .stat-icon.reception {
        background: linear-gradient(135deg, #fed7d7, #feb2b2);
        color: #c53030;
    }

    .stat-icon.service {
        background: linear-gradient(135deg, #fefcbf, #faf089);
        color: #d69e2e;
    }

    .stat-icon.technical {
        background: linear-gradient(135deg, #e9d8fd, #d6bcfa);
        color: #6b46c1;
    }

    .stat-icon.manager {
        background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
        color: #276749;
    }

    .stat-icon.security {
        background: linear-gradient(135deg, #fed7d7, #feb2b2);
        color: #c53030;
    }

    .stat-icon.fulltime {
        background: linear-gradient(135deg, #bee3f8, #90cdf4);
        color: #2c5aa0;
    }

    .stat-info h3 {
        margin: 0;
        font-size: 2.5rem;
        color: #1e293b;
        font-weight: 700;
    }

    .stat-info p {
        margin: 8px 0 0 0;
        color: #64748b;
        font-size: 1.1rem;
        font-weight: 500;
    }

    /* ===== L∆Ø·ªöI ƒê·∫∂T PH√íNG ===== */
    .employees-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
        gap: 28px;
    }

    .employee-card {
        background: white;
        border-radius: var(--border-radius-xl);
        overflow: hidden;
        box-shadow: var(--shadow-light);
        transition: all 0.4s ease;
        border: 1px solid rgba(0, 0, 0, 0.03);
        position: relative;
    }

    .employee-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-heavy);
    }

    .employee-image {
        position: relative;
        height: 240px;
        overflow: hidden;
    }

    .employee-avatar-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
    }

    .employee-avatar-placeholder.booking {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    }

    .employee-avatar-placeholder.booking i {
        font-size: 2rem;
    }

    .employee-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: all 0.4s ease;
    }

    .employee-card:hover .employee-overlay {
        opacity: 1;
    }

    .employee-actions {
        display: flex;
        gap: 16px;
    }

    .btn-edit,
    .btn-delete {
        width: 56px;
        height: 56px;
        border: none;
        border-radius: 14px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .btn-edit {
        background: var(--success-gradient);
        color: white;
    }

    .btn-delete {
        background: var(--danger-gradient);
        color: white;
    }

    .employee-badge {
        position: absolute;
        top: 16px;
        left: 16px;
        padding: 8px 16px;
        border-radius: 25px;
        font-size: 0.85rem;
        font-weight: 700;
        backdrop-filter: blur(10px);
        box-shadow: var(--shadow-light);
        z-index: 2;
    }

    .employee-badge.S·∫Øp\ t·ªõi {
        background: linear-gradient(135deg, rgba(237, 137, 54, 0.95), rgba(217, 119, 6, 0.95));
        color: white;
    }

    .employee-badge.ƒêang\ s·ª≠\ d·ª•ng {
        background: linear-gradient(135deg, rgba(72, 187, 120, 0.95), rgba(56, 161, 105, 0.95));
        color: white;
    }

    .employee-badge.ƒê√£\ k·∫øt\ th√∫c {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.95), rgba(118, 75, 162, 0.95));
        color: white;
    }

    .employee-badge.ƒê√£\ h·ªßy {
        background: linear-gradient(135deg, rgba(245, 101, 101, 0.95), rgba(229, 62, 62, 0.95));
        color: white;
    }

    .employee-status {
        position: absolute;
        bottom: 16px;
        right: 16px;
        padding: 8px 16px;
        border-radius: 25px;
        font-size: 0.9rem;
        font-weight: 700;
        box-shadow: var(--shadow-light);
        z-index: 2;
    }

    .employee-status.active {
        background: linear-gradient(135deg, rgba(72, 187, 120, 0.95), rgba(56, 161, 105, 0.95));
        color: white;
    }

    .employee-status.onleave {
        background: linear-gradient(135deg, rgba(237, 137, 54, 0.95), rgba(217, 119, 6, 0.95));
        color: white;
    }

    .employee-status.inactive {
        background: linear-gradient(135deg, rgba(245, 101, 101, 0.95), rgba(229, 62, 62, 0.95));
        color: white;
    }

    .employee-content {
        padding: 24px;
    }

    .employee-name {
        margin: 0 0 12px 0;
        color: #1e293b;
        font-size: 1.4rem;
        font-weight: 700;
    }

    .employee-code {
        margin: 0 0 20px 0;
        color: #64748b;
        font-size: 1rem;
        font-weight: 500;
    }

    .employee-details {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 20px;
    }

    .detail-item {
        display: flex;
        align-items: center;
        gap: 12px;
        color: #475569;
        font-size: 1rem;
    }

    .detail-item i {
        color: #667eea;
        width: 20px;
        font-size: 1.1rem;
    }

    /* ===== CHI TI·∫æT KH√ÅCH H√ÄNG TRONG CARD ===== */
    .customer-breakdown {
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #e2e8f0;
    }

    .customer-breakdown h4 {
        margin-bottom: 8px;
        color: #374151;
        font-size: 0.9rem;
        font-weight: 600;
    }

    .customer-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 0.9em;
    }

    .customer-name {
        font-weight: bold;
        color: #2d3748;
    }

    .customer-phone {
        color: #666;
    }

    /* ===== FOOTER CARD V·ªöI N√öT ===== */
    .employee-footer {
        display: flex;
        gap: 10px;
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid #e2e8f0;
    }

    .employee-footer button {
        flex: 1;
        padding: 10px 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .btn-detail {
        background: var(--info-gradient);
        color: white;
    }

    .btn-detail:hover {
        background: linear-gradient(135deg, #3182ce, #2c5aa0);
        transform: translateY(-2px);
    }

    .btn-checkin {
        background: var(--success-gradient);
        color: white;
    }

    .btn-checkin:hover {
        background: linear-gradient(135deg, #38a169, #2f855a);
        transform: translateY(-2px);
    }

    .btn-checkout {
        background: var(--warning-gradient);
        color: white;
    }

    .btn-checkout:hover {
        background: linear-gradient(135deg, #dd6b20, #c05621);
        transform: translateY(-2px);
    }

    /* ===== TR·∫†NG TH√ÅI R·ªñNG ===== */
    .empty-state {
        text-align: center;
        padding: 80px 40px;
        background: white;
        border-radius: var(--border-radius-xl);
        box-shadow: var(--shadow-light);
        border: 2px dashed #e2e8f0;
    }

    .empty-icon {
        font-size: 5rem;
        margin-bottom: 24px;
        opacity: 0.7;
    }

    .empty-state h3 {
        margin: 0 0 12px 0;
        color: #1e293b;
        font-size: 1.8rem;
        font-weight: 700;
    }

    .empty-state p {
        margin: 0 0 32px 0;
        color: #64748b;
        font-size: 1.2rem;
    }

    /* ===== MODAL CHUNG ===== */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
        backdrop-filter: blur(8px);
    }

    .modal-container {
        background: white;
        border-radius: var(--border-radius-xl);
        width: 100%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        border: 1px solid rgba(255, 255, 255, 0.2);
        animation: modalSlideIn 0.4s ease-out;
    }

    .modal-container.large {
        max-width: 800px;
    }

    .invoice-modal {
        max-width: 800px;
    }

    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: translateY(-30px) scale(0.9);
        }

        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 28px;
        border-bottom: 2px solid #f1f5f9;
        background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        border-radius: var(--border-radius-xl) var(--border-radius-xl) 0 0;
    }

    .modal-header h2 {
        margin: 0;
        color: #1e293b;
        font-size: 1.8rem;
        font-weight: 700;
    }

    .modal-close {
        background: #f1f5f9;
        border: none;
        font-size: 1.4rem;
        color: #64748b;
        cursor: pointer;
        padding: 8px;
        border-radius: var(--border-radius);
        transition: all 0.3s ease;
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-body {
        padding: 28px;
    }

    .modal-footer {
        display: flex;
        justify-content: flex-end;
        gap: 16px;
        padding: 28px;
        border-top: 2px solid #f1f5f9;
        background: #f8fafc;
        border-radius: 0 0 var(--border-radius-xl) var(--border-radius-xl);
    }

    /* ===== FORM TRONG MODAL ===== */
    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
    }

    .form-group label {
        margin-bottom: 10px;
        color: #374151;
        font-weight: 600;
        font-size: 1rem;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        padding: 14px 16px;
        border: 2px solid #e2e8f0;
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-1px);
    }

    /* ===== HEADER MODAL ƒê·∫∂T PH√íNG HI·ªÜN ƒê·∫†I ===== */
    .modal-header.invoice-company-header {
        background: var(--primary-gradient);
        color: white;
        padding: 25px 30px 20px;
        border-radius: var(--border-radius-xl) var(--border-radius-xl) 0 0;
        display: block;
    }

    /* H√†ng 1: Logo v√† n√∫t h√†nh ƒë·ªông */
    .header-top-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .company-logo {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .logo-placeholder {
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
    }

    .company-info h1 {
        margin: 0 0 5px 0;
        font-size: 22px;
        font-weight: 700;
        line-height: 1.2;
    }

    .company-info p {
        margin: 0;
        font-size: 13px;
        opacity: 0.9;
        line-height: 1.3;
    }

    .header-actions {
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .btn-print-invoice,
    .btn-download-invoice,
    .btn-pay-invoice {
        padding: 10px 16px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        backdrop-filter: blur(10px);
    }

    .btn-print-invoice:hover,
    .btn-download-invoice:hover,
    .btn-pay-invoice:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    .btn-pay-invoice {
        background: var(--success-gradient);
    }

    .modal-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        font-size: 16px;
    }

    .modal-close:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: rotate(90deg);
    }

    /* H√†ng 2: Ti√™u ƒë·ªÅ */
    .header-title-row {
        text-align: center;
        margin: 40px 0px 15px 0px;
    }

    .header-title-row h2 {
        margin: 0;
        font-size: 34px;
        font-weight: 700;
        color: white;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* H√†ng 3: Th√¥ng tin ƒë·∫∑t ph√≤ng */
    .header-meta-row {
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
    }

    .meta-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .meta-item .label {
        font-size: 13px;
        opacity: 0.8;
        margin-bottom: 4px;
        font-weight: 500;
    }

    .meta-item .value {
        font-size: 16px;
        font-weight: 600;
    }

    .status-badge {
        padding: 3px 6px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
    }

    .status-badge.active {
        background: rgba(72, 187, 120, 0.9);
        color: white;
    }

    .status-badge.pending {
        background: rgba(237, 137, 54, 0.9);
        color: white;
    }

    .status-badge.completed {
        background: rgba(102, 126, 234, 0.9);
        color: white;
    }

    .status-badge.cancelled {
        background: rgba(245, 101, 101, 0.9);
        color: white;
    }

    /* ===== ƒê·∫∂T PH√íNG CHI TI·∫æT HI·ªÜN ƒê·∫†I ===== */
    .modern-invoice {
        background: white;
        border-radius: 0 0 12px 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .invoice-customer-info {
        padding: 25px 30px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        border-bottom: 1px solid #e2e8f0;
    }

    .info-section h3 {
        margin: 0 0 15px 0;
        color: #2d3748;
        font-size: 16px;
        font-weight: 600;
    }

    .info-grid {
        display: grid;
        gap: 10px;
    }

    .info-item {
        display: flex;
        justify-content: space-between;
    }

    .info-item .label {
        color: #718096;
        font-weight: 500;
    }

    .info-item .value {
        color: #2d3748;
        font-weight: 600;
    }

    .invoice-services {
        padding: 25px 30px;
        border-bottom: 1px solid #e2e8f0;
    }

    .invoice-services h3 {
        margin: 0 0 20px 0;
        color: #2d3748;
        font-size: 18px;
        font-weight: 600;
    }

    .services-table {
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        overflow: hidden;
    }

    .table-header {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        background: #f7fafc;
        padding: 15px 20px;
        font-weight: 600;
        color: #4a5568;
        border-bottom: 1px solid #e2e8f0;
    }

    .table-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 15px 20px;
        border-bottom: 1px solid #e2e8f0;
    }

    .table-row:last-child {
        border-bottom: none;
    }

    .table-row.no-services {
        grid-template-columns: 1fr;
        text-align: center;
        color: #718096;
        font-style: italic;
    }

    .col-service .service-name {
        display: block;
        font-weight: 500;
        color: #2d3748;
    }

    .col-service .service-desc {
        display: block;
        font-size: 12px;
        color: #718096;
        margin-top: 4px;
    }

    .col-date,
    .col-time {
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 500;
    }

    .invoice-summary {
        padding: 25px 30px;
        border-bottom: 1px solid #e2e8f0;
    }

    .summary-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
    }

    .summary-row.total {
        border-top: 2px solid #e2e8f0;
        margin-top: 10px;
        padding-top: 15px;
        font-size: 18px;
        font-weight: 700;
        color: #2d3748;
    }

    .invoice-payment {
        padding: 25px 30px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        border-bottom: 1px solid #e2e8f0;
    }

    .payment-method h4,
    .payment-notes h4 {
        margin: 0 0 15px 0;
        color: #2d3748;
        font-size: 16px;
        font-weight: 600;
    }

    .method {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 15px;
        background: #f7fafc;
        border-radius: 8px;
        font-weight: 500;
    }

    .method.paid {
        color: #48bb78;
    }

    .method.cash {
        color: #ed8936;
    }

    .payment-notes p {
        margin: 5px 0;
        color: #718096;
        font-size: 14px;
    }

    .payment-notes.full-width {
        grid-column: 1 / -1;
    }

    .invoice-footer {
        padding: 25px 30px;
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
    }

    .footer-signature {
        text-align: center;
    }

    .signature-line {
        width: 200px;
        height: 1px;
        background: #2d3748;
        margin-bottom: 5px;
    }

    .footer-signature p {
        margin: 0;
        color: #718096;
        font-size: 14px;
    }

    .footer-thanks {
        text-align: right;
    }

    .footer-thanks p {
        margin: 2px 0;
        color: #4a5568;
    }

    /* ===== TR·∫†NG TH√ÅI LOADING V√Ä ERROR ===== */
    .loading-invoice {
        text-align: center;
        padding: 60px 20px;
    }

    .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .error-state {
        text-align: center;
        padding: 60px 20px;
    }

    .error-icon {
        font-size: 48px;
        margin-bottom: 20px;
    }

    .error-state h3 {
        margin: 0 0 10px 0;
        color: #2d3748;
    }

    .error-state p {
        margin: 0 0 20px 0;
        color: #718096;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
        .main-content {
            margin-left: 0 !important;
            padding: 16px;
        }

        .admin-dashboard {
            padding: 16px;
        }

        .header-content {
            flex-direction: column;
            align-items: stretch;
            text-align: center;
        }

        .header-title {
            justify-content: center;
            text-align: center;
        }

        .search-filter-bar {
            flex-direction: column;
            align-items: stretch;
            padding: 20px;
        }

        .search-box {
            min-width: auto;
            margin-bottom: 16px;
        }

        .filter-controls {
            flex-direction: column;
            align-items: stretch;
        }

        .filter-select {
            min-width: auto;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .employees-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .stats-overview {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .modal-container {
            margin: 10px;
            max-width: none;
        }

        .employee-footer {
            flex-direction: column;
        }

        .invoice-customer-info,
        .invoice-payment {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .table-header,
        .table-row {
            grid-template-columns: 1fr;
            text-align: center;
            gap: 10px;
        }

        .col-date,
        .col-time {
            justify-content: center;
        }

        .invoice-footer {
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .footer-signature,
        .footer-thanks {
            text-align: center;
        }

        /* Responsive cho header modal ƒë·∫∑t ph√≤ng */
        .modal-header.invoice-company-header {
            padding: 20px 15px 15px;
        }

        .header-top-row {
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
        }

        .company-logo {
            flex-direction: column;
            text-align: center;
            gap: 10px;
        }

        .company-info h1 {
            font-size: 20px;
        }

        .company-info p {
            font-size: 12px;
        }

        .header-actions {
            width: 100%;
            justify-content: center;
        }

        .header-title-row h2 {
            font-size: 20px;
        }

        .header-meta-row {
            gap: 15px;
        }

        .meta-item .label {
            font-size: 12px;
        }

        .meta-item .value {
            font-size: 14px;
        }

        .btn-print-invoice,
        .btn-download-invoice,
        .btn-pay-invoice {
            padding: 8px 12px;
            font-size: 12px;
        }
    }

    @media (max-width: 480px) {
        .header-meta-row {
            flex-direction: column;
            gap: 10px;
        }

        .meta-item {
            flex-direction: row;
            justify-content: space-between;
            width: 100%;
        }

        .meta-item .label {
            margin-bottom: 0;
        }
    }

    /* ===== CSS CHO IN ·∫§N ƒê·∫∂T PH√íNG ===== */
    @media print {
        body {
            margin: 0;
            padding: 20px;
            background: white !important;
        }

        .modern-invoice {
            box-shadow: none;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 0;
        }

        .btn-print-invoice,
        .btn-download-invoice,
        .btn-pay-invoice,
        .modal-close,
        .modal-header .invoice-actions {
            display: none !important;
        }

        .modal-overlay {
            position: static;
            background: none;
            backdrop-filter: none;
        }

        .modal-container {
            box-shadow: none;
            max-width: none;
            max-height: none;
        }
    }

    /* ===== N√öT THO√ÅT TRONG MODAL CHI TI·∫æT ===== */
    .btn-close-detail {
        background: rgba(245, 101, 101, 0.9);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .btn-close-detail:hover {
        background: rgba(229, 62, 62, 0.9);
        transform: translateY(-2px);
    }

    .btn-checkin-detail {
        background: rgba(72, 187, 120, 0.9);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .btn-checkin-detail:hover {
        background: rgba(56, 161, 105, 0.9);
        transform: translateY(-2px);
    }

    .btn-checkout-detail {
        background: rgba(237, 137, 54, 0.9);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .btn-checkout-detail:hover {
        background: rgba(217, 119, 6, 0.9);
        transform: translateY(-2px);
    }

    /* ===== MODAL OVERLAY - CLICK RA NGO√ÄI ƒê·ªÇ ƒê√ìNG ===== */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
        backdrop-filter: blur(8px);
        cursor: pointer;
    }

    .modal-container {
        cursor: default;
    }

    /* ===== RESPONSIVE CHO N√öT H√ÄNH ƒê·ªòNG ===== */
    @media (max-width: 768px) {

        .btn-close-detail,
        .btn-checkin-detail,
        .btn-checkout-detail {
            padding: 8px 12px;
            font-size: 12px;
        }

        .header-actions {
            flex-wrap: wrap;
            justify-content: center;
        }
    }

    /* ===== N√öT TRONG MODAL CHI TI·∫æT ===== */
    .btn-checkin-detail {
        background: rgba(72, 187, 120, 0.9);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .btn-checkin-detail:hover {
        background: rgba(56, 161, 105, 0.9);
        transform: translateY(-2px);
    }

    .btn-checkout-detail {
        background: rgba(237, 137, 54, 0.9);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .btn-checkout-detail:hover {
        background: rgba(217, 119, 6, 0.9);
        transform: translateY(-2px);
    }

    /* ===== MODAL OVERLAY - CLICK RA NGO√ÄI ƒê·ªÇ ƒê√ìNG ===== */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
        backdrop-filter: blur(8px);
        cursor: pointer;
    }

    .modal-container {
        cursor: default;
    }

    /* ===== RESPONSIVE CHO N√öT H√ÄNH ƒê·ªòNG ===== */
    @media (max-width: 768px) {

        .btn-checkin-detail,
        .btn-checkout-detail {
            padding: 8px 12px;
            font-size: 12px;
        }

        .header-actions {
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
    }
</style>